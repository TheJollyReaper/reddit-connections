<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title><%= htmlWebpackPlugin.options.title %></title>

    <style>
        body { margin: 0; }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  </head>
  <body>
    
    <section id="loading-screen">

        <div id="loader"></div>
    
    </section>

    <div id="everything">
        <canvas id="c"></canvas>

        <div id="panel">

            <div id="search">
                <input id="search-input" type="search" placeholder="Search for a subreddit" required>
                <div id="search-dropdown">
                    <!-- Subreddits get inserted here through javascript -->
                </div>
            </div>

            <!-- <div></div> -->
            <form id="size-filters">
                <div class="container">
                    <h5>Size: </h5>
                    <select name="size-filter" id="size-filter" class="filter">
                        <!-- <input placeholder="Job" type="text" name="job" /> -->
                        <option value="N_posts_radius">Total Posts</option>
                        <option value="max_subscribers_radius">Max Subscribers</option>
                        <option value="N_distinct_posters_radius">Unique Posters</option>
                        <option value="N_distinct_commenters_radius">Unique Commenters</option>
                        <option value="N_self_posts_radius">Average Text Post Length</option>
                        <option value="mean_comment_length_radius">Average Comment Length</option>
                        <option value="mean_post_score_radius">Average Post Score</option>
                        <option value="mean_comment_score_radius">Average Comment Score</option>
                        <option value="interactions_radius">Interactions (Comments/Post)</option>
                        <!-- <option value="N_deleted_posts_radius">Deleted Posts</option> -->
                        <!-- <option value="N_distinct_posters_radius">Unique Posters</option> -->
                        <!-- <option value="N_distinct_commenters_radius">Unique Commentors</option> -->
                        <!-- <option value="mean_comment_score_radius">Mean Comment Length</option> -->
                        <!-- <option value="N_deleted_posts_radius">Deleted Posts</option> -->
                        <!-- <option value="N_distinct_commenters">Mean Comment Length (log)</option> -->
                        <!-- <option value="N_distinct_commenters">Mean Post Length</option> -->
                        <!-- <option value="N_distinct_commenters">Mean Post Length (log) </option> -->
                        <!-- <option value="N_distinct_commenters">Interactions (comments/posts)</option> -->
                    </select>
                </div> 
            </form>

            <form id="color-filters">
                <div class="container">
                    <h5>Color: </h5>
                    <select name="color-filter" id="color-filter" class="filter">
                        <!-- <input placeholder="Job" type="text" name="job" /> -->
                        <option value="clusters">Topic Clusters</option>
                        <option value="NSFW_%">NSFW %</option>
                        <option value="post_moderation_%">Post Moderation %</option>
                        <option value="comment_moderation_%">Comment Moderation %</option>
                        <option value="text_posts_%">Text Posts %</option>
                        <option value="media_%">Media %</option>
                        <option value="links_%">Links %</option>
                    </select>
                </div> 
            </form>

            <form id="line-filters">
                <div class="container">
                    <h5>Lines: </h5>
                    <select name="line-filter" id="line-filter" class="filter">
                        <!-- <input placeholder="Job" type="text" name="job" /> -->
                        <option value="cross_post_lines">Cross Posting %</option>
                        <option value="term_similarity_lines">Term Similarity %</option>
                        <option value="author_lines">Author Similarity %</option>
                        <option value="estimate_lines">Mutualism & Competition</option>
                    </select>
                </div> 
            </form>

            <!-- <input type="color" value="#f6f82" id="colorPicker" onchange=setBackgroundColor(value)> -->
        </div>
    </div>

    <div id="line-popup">
        <h3 id="popup-subreddits">tacos</h3>
        <h4 id="popup-crossposts">turtles: </h4>
        <h4 id="popup-author">Author Similarity</h4>
        <h4 id="popup-term">Term Similarity</h4>
        <h4 id="popup-estimate">Competition</h4>
        <h4 id="popup-estimate2">Competition</h4>
    </div>

    <div id="popup-panels">
        <div id="main-section">
            <img id="subreddit-img" width="60%"/>
            <button id="close">X</button>
        </div>

        <h3 id="subreddit-name" style="margin: 5%"></h3>
        <p id="description"></p>

        <div style="display: flex; flex-direction:row">
            <a id="visit-link" target="_blank" rel="noreferrer noopener" url><button class="links"><h3 >Visit</h3></button></a>
            <a id="rules-link" target="_blank" rel="noreferrer noopener" url><button class="links" ><h3>Rules</h3></button></a>
        </div>

        <div id="similar-subreddits">
            <div>

            </div>

            <div>

            </div>
        </div>
    </div>

    <div id="line-panel">
        <!-- <h2>hello</h2> -->
    </div>

    <div id="legend">
        <h5>low</h5>
        <div id = 'color-0' class="gradient-block">

        </div>
        <div id = 'color-1' class="gradient-block">

        </div>
        <div id = 'color-2' class="gradient-block">

        </div>
        <div id = 'color-3' class="gradient-block">

        </div>
        <div id = 'color-4' class="gradient-block">

        </div>

        <div id = 'color-5' class="gradient-block">

        </div>
        <div id = 'color-6' class="gradient-block">

        </div>
        <div id = 'color-7' class="gradient-block">

        </div>
        <div id = 'color-8' class="gradient-block">

        </div>
        <div id = 'color-9' class="gradient-block">

        </div>
        <h5>high</h5>
    </div>

    <!-- <div id="menu"> -->
    <div class="menu-tabs">
        <button id="about-button" class="tablinks">About</button>
        <button id="tutorial-button" class="tablinks">Tutorial</button>
        <button id="data-button" class="tablinks">Data</button>
    </div>

    <div id="menu-content"> 
        <div id="about">
            <h3>Reddit Connections</h3>
            <ul>
                <li>
                    <h6>This is a web data dashboard that maps the connections between subreddits from the social media page <a href="https://www.reddit.com/" >Reddit</a>. Using data from the Reddit API and <a href="https://dl.acm.org/doi/10.1145/3512908">synthesized by the Community Data Sciende Collective</a>, this dashboard visualizes attributes about subreddits (i.e. # of distinct posters, % of media posts) and relationships between subreddits (i.e. # of cross-posts). There are also deeper insights about the competition and mutualism between subreddits (when one subreddit gains subscribers, another subreddit gains or loses subscribers). 
                        The hope for this project is that it will be used by Reddit users to explore new subreddits and by data researchers and enthusiasts to more deeply understand the Reddit ecosystem.
                        
                        This is a culminating project by students at the University of Washington studying <a href="https://www.hcde.washington.edu/">Human-Centered Design & Engineering</a>, sponsored by the <a href="https://wiki.communitydata.science/Main_Page">Community Data Science Collective</a> in 2022. 
                        
                        Check out our <a href="https://github.com/TheJollyReaper/reddit-connections" >GitHub repo</a>.
                         

                    </h6>
                </li>
            </ul>


        </div>
    
        <div id="tutorial">
            <h3>Tutorial</h3>
        </div>
    
        <div id="data">
            <h3>Data</h3>
            <ul>
                <li>
                    <h5><b>Bubble position based on t-SNE Coordiantes</b></h5>
                    <h6>Approximation of subreddit similarity. Most accurate between subreddits that are close together, less accurate as the subreddits get farther apart. 

                        This data is found by embedding subreddits with similar sets of commenters. 

                        The final coordinates include some miltipliers to prevent subreddits overlapping too much. 
                        
                        (For more information, see the methods section of the research paper “No Community Can do everything” https://dl.acm.org/doi/10.1145/3512908 )</h6>
                </li>
                <li>
                    <h5><b>Bubble Size</b></h5>
                    <h6> The importance of size of a subreddit is in comparison to the subreddits surrounding it. If We used raw numbers, some circles would take up the whole page while others would never be visible. We balanced showing a range of size values with maintaining visibility of subreddits, so none were too small or had too much overlap.
                        
                        To do so, we created a z-score (a measure of how far a raw piece of data is from the average of the data in comparison to the rest of the data), added a constant of 4 to ensure all numbers were positive, then multiplied the number by 20. 

                        This number becomes the area of the circle. 
                    </h6>
                </li>
                <li>
                    <h5><b>Distinct Posters</b></h5>
                    <h6>Number of unique accounts that post to the subreddit.</h6>
                </li>
                <li>
                    <h5><b>Distinct Commenters</b></h5>
                    <h6>Number of unique accounts that comment in the subreddit</h6>
                </li>
                <li>
                    <h5><b>Mean comment length</b></h5>
                    <h6> Average character length of a comment. 
                        This shows whether comments are, on average, short phrases or long paragraphs.
                    </h6>
                </li>
                <li>
                    <h5><b>Mean post length</b></h5>
                    <h6>verage length of post (in characters) in a subreddit. 

                        This shows whether posts with text are, on average, short phrases or long paragraphs 
                    </h6>
                </li>
                <li>
                    <h5><b>Interactions (comments/post)</b></h5>
                    <h6> The ratio of comments per post in a subreddit.
                        This indicates, on average, the level of interaction of posts in the subreddit.
                    </h6>
                </li>
                <li>
                    <h5><b>Topic clusters</b></h5>
                    <h6>Subreddits that have a significant overlap in users

                        Specifically found by the HDBSCAN algorithm, this finds clusters of subreddits who have greater user similarity with each other than with subreddits not in that cluster. 
                        
                        More information of <a href="https://towardsdatascience.com/understanding-hdbscan-and-density-based-clustering-121dbee1320e" >HDBSCAN</a>.
                    </h6>
                </li>
                <li>
                    <h5><b>NSFW%</b></h5>
                    <h6>Percentage of posts in a subreddit that are tagged as “Not Safe For Work”. This can include content “graphic, sexually-explicit, or offensive”. More information at <a href="https://www.redditinc.com/policies/content-policy" >Reddit Content Policy</a>
                    </h6>
                </li>
                <li>
                    <h5><b>Mean Post Score</b></h5>
                    <h6>Average score for each post, where the score is approximately the # of upvotes minus the  # of downvotes. This shows, on average, how upvoted the posts on the posts on a subreddit are.</h6>
                </li>
                <li>
                    <h5><b>Mean Comment Score</b></h5>
                    <h6>Average score for each post, where the score is approximately the # of upvotes minus # of downvotes. This indicates, on average, how upvoted the posts on the posts on a subreddit are.</h6>
                </li>
                <li>
                    <h5><b>Comment Moderation (deleted comments/comments)</b></h5>
                    <h6>The number of deleted comments divided by the total number of comments in a subreddit. This indicates, on average, how heavily moderated a subreddit is.</h6>
                </li>
                <li>
                    <h5><b>Post Moderation (deleted posts/posts)</b></h5>
                    <h6>The number of deleted posts divided by the total number of posts in a subreddit. This indicates, on average, how heavily moderated a subreddit is.</h6>
                </li>
                <li>
                    <h5><b>Media Posts %</b></h5>
                    <h6>The number of media posts(images, videos, ect.) divided by the total number of posts in a subreddit.</h6>
                </li>
                <li>
                    <h5><b>Text Posts %</b></h5>
                    <h6>The number of text posts divided by the total number of posts in a subreddit.</h6>
                </li>
                <li>
                    <h5><b>Links % </b></h5>
                    <h6>The number of posts with links divided by the total number of posts in a subreddit.
                    </h6>
                </li>
                <li>
                    <h5><b>Cross Posts %</b></h5>
                    <h6>This measures the number of cross-posts between two subreddits. 

                        Cross-posts are posts that are the exact same, but have been posted in multiple subreddits.
                        
                        Math: When comparing subreddit A against subreddit B, it takes the number of self-posts (i.e text posts) in subreddit A that is a cross-post from subreddit B, and divides that by the total number of posts in the smaller subreddit.  
                        </h6>
                </li>
                <li>
                    <h5><b>Term Similarity</b></h5>
                    <h6>Measures the similarity of terms in two subreddits compared to terms across all subreddits.

                        Specifically, <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf" >TF-IDF</a> vectors are used to fit an embedding model (using <a href="https://en.wikipedia.org/wiki/Singular_value_decomposition" >SVD</a>) that projects them into a lower dimensional space. This technique is known as <a href="https://en.wikipedia.org/wiki/Latent_semantic_analysis">latent semantic analysis</a>.
                    </h6>
                </li>
                <li>
                    <h5><b>Mutualism & Competition</b></h5>
                    <h6>Mutualism is an ecological interaction where growth in the first group leads to growth in the second. Competition is when growth in the first group leads to decline in the second. Ecological interactions can be mutualistic in one direction and competitive in the other and mutualism (or competition) from one group to another group may (or may not) be returned in kind.</h6>
                </li>
            </ul>
        </div>
    </div>
    <!-- </div> -->
    
    
    <my-app></my-app>

  </body>
</html>